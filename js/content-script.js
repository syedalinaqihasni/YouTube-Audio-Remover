(()=>{"use strict";let e=null;function n(n){chrome.storage.sync.get({showThumbnail:!0},(function(t){t.showThumbnail&&async function(n){e||(e={background:n.style.background,backgroundSize:n.style.backgroundSize});let t=window.location.search.split("v=")[1];if(!t)return;const o=t.indexOf("&");-1!==o&&(t=t.substring(0,o));const i=[`https://img.youtube.com/vi/${t}/maxresdefault.jpg`,`https://img.youtube.com/vi/${t}/sddefault.jpg`,`https://img.youtube.com/vi/${t}/hqdefault.jpg`,`https://img.youtube.com/vi/${t}/mqdefault.jpg`,`https://img.youtube.com/vi/${t}/0.jpg`],c=await async function(e,n){for(const t of e)if(await n(t))return t;return null}(i,(async e=>{const n=new Image;return n.src=e,await async function(e){return new Promise((n=>{const t=setInterval((()=>{e.complete&&(clearInterval(t),n(null))}),400)}))}(n),120!==n.width}));n.style.background=`transparent url(${c}) no-repeat center / cover`}(n)})),function(e){if(0===document.getElementsByClassName("audio_only_div").length){const n=document.createElement("div");n.className="audio_only_div";const t=document.createElement("p");t.className="alert_text",t.innerHTML="Audio Only. To watch video, click on the extension icon above and refresh your page.",n.appendChild(t);const o=e.parentNode;if(!o)return;const i=o.parentNode;i&&i.appendChild(n)}}(n)}chrome.runtime.onMessage.addListener((t=>{const o=t.url,i=window.document.getElementsByTagName("video")[0];if(void 0===i)return void console.log("YT Just Audio  - Video element undefined in this frame!");const c=i.getBoundingClientRect();0!==c.width||0!==c.height?(i.onloadeddata=function(e,n){return function(){""!==n&&e.src!==n&&(e.pause(),e.src=n,e.currentTime=0,e.play())}}(i,o),o?n(i):function(n){!function(n){e&&(n.style.background=e.background)}(n),function(){const e=document.getElementsByClassName("audio_only_div");e.length&&Array.from(e).forEach((function(e){e.remove()}))}()}(i)):console.log("YT Just Audio  - Video element not visible!")}))})();